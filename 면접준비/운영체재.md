# 동시성
- 동시에 여러 작업이 실행되는 것 같이 보이도록 싱글 코어에서 멀티 쓰레드를 동작시키는 방식.
- 한번에 많을 일을 처리 할 수 있음.
- 물리적인 하나의 코어로 논리적인 여러 작업으로 나눠서 처리
- 싱글코어 일때 동시에 여러작업을 수행하려면 내부적으로 Context Switch가 일어남
- 반대로 병렬성이 있음. 실제로 동시에 여러 작업을 처리

# 동시성 이슈
- 둘 이상의 쓰레드가 동시에 같은 인스턴스의 필드 값을 변경하면서 발생하는 문제

# 경쟁 상태(Race Condition)
- 여러 프로세스(스레드)가 같은 데이터를 동시에 접근하고 조작할 때 발생
- 실행 결과가 작업의 순서에 따라서 달라짐
- 경쟁 상태를 막을려면 한번에 하나의 프로세스(스레드)만 접근해서 데이터를 조작할 수 있도록 해야함
- 그러기 위해서는 프로세스(스레드)를 동기화 시켜야 됨

# 임계영역(critical section)
- 둘 이상의 스레드가 동시에 접근해서는 안되는 공유 자원을 접근하는 코드의 영역을 말함
- 임계영역에 들어가기 위해서는 동기화 매커니즘에 의해서 제어되어야 한다.

# 상호배제(Mutual Exclustion)
- 어느 시점에서 임계영역에 단 한 개의 프로세스(스레드)만이 사용할 수 있도록 하는 것
- 임계영역에 이미 진입한 프로세스가 있다면 다른 프로세스가 해당 영역에 접근하는 것을 막음
- 상호 배제 알고리즘 3가지
    - 뮤텍스
    - 세마포어
    - 모니터

## 뮤텍스
- Mutex : **Mu**tal **Exc**lusion의 머릿글자를 따서 만듬
- 임계영역에서 경쟁 상태를 막기위한 기술
- 임계영역에 진입하기 전에 lock을 얻어야 함
- 임계영역에서 나오면서 lock을 해제

## 세마포어(Semaphore: 신호기)
- 프로세스간의 시그널을 주고받기 위해 사용되는 정수값, 리소스의 상태를 나타내는 카운터를 사용
- 초기화 작업과 wait과 signal이라는 2개의 기본적인 atomic 연산을 지원
- 카운터가 1이면 Binary 세마포어라고 함
- 카운터가 2이상이면 counting 세마포어라고 함

## 모니터
- 세마포어는 키의 관리를 직접해서 잘못하면 임계영역에 다수의 프로세가 동시에 들어가는 문제가 발생
- 하나의 프로세스 내의 다른 스레드 간 동기화에 사용
- 동기화 작업들이 캡슐화되어 있어서 편하게 동기화 가능

### 자바의 모니터락
- 자바는 모니터락을 사용
- syncronized, wait(), notify() 키워드를 통해서 동기화를 수행할 수 있다

# Thread-Safe
- 여러 스레드에서 동시에 같은 데이터에 접근해서 작업 하더라도 실행에 문제가 없음을 뜻함
- Thread-safe을 지키기 위한 방법
    - Re-entrancy : 동시에 같은 루틴에 접근해도 언제나 같은 결과를 반환
    - Thread-local storage : 스레드만 접근 가능한 저장소를 사용
    - Mutual exclusion: 스레드들의 접근 제어
    - Atomic operation: 공유 자원에 대한 연산을 원자적으로 구현

# 데드락
- 잘못된 자원 관리로 둘 이상의 프로세스가 함께 멈추는 현상
- 데드락에 빠지면 프로세스가 자원을 얻기 위해 무한전 대기 상태가 됨
- 데드락이 일어나기위한 조건
    - 상호배재
    - Hold and wait
    - 비선점
    - 순환